# 成员端使用说明
以下指令接受所有**拥有子频道发言权限**的用户触发；**全部子频道**指`状态`、`一王`、`二王`、`三王`、`四王`、`五王`六个子频道，部分指令需在**特定子频道**触发，请注意区分。

## 子频道功能
- 状态子频道`状态`：可响应所有`查询指令`和部分`报刀指令`，主要用于**推送信息**。
- BOSS子频道`一王`\~`五王`：可响应所有`查询指令`和`报刀指令`，主要用于**刀伤的“增删改查”**（`报刀`、`撤销`、`修改`、`查刀`）和推送对应BOSS相关的信息。

## 查询指令

### 状态
收到`状态`指令后，机器人会获取并推送`所有BOSS当前状态`。<br>
此指令可在**全部子频道**下触发。
- 指令格式：`状态`
- 返回信息：
	- `所有BOSS的当前状态`
	- 当消息子频道为`BOSS子频道`时，会额外返回`该BOSS的当前状态`
	- 当消息子频道为`状态子频道`时，会**自动撤回**用户指令和已过期的状态推送

### 出刀记录
收到`出刀记录`指令后，机器人会获取并推送`指定成员当日出刀记录`。<br>
此指令可在**全部子频道**下触发。
- 指令格式：`出刀记录[@用户]`或`出刀详情[@用户]`
- 返回信息：
	- 不带`[@用户]`参数时，返回成员自己的当日出刀记录
	- 带有`[@用户]`参数时，返回指定成员的当日出刀记录

### 查刀
收到`查刀`指令后，机器人会获取并推送`全体成员的出刀情况`。<br>
此指令可在**全部子频道**下触发。
- 指令格式：`查[刀数|'补'|'补时']刀`，其中`刀数`是值位于[0, 9]之间的整数。
- 指令及其返回信息举例：
	- `查刀`，返回全会当前**持有补偿**和**出完各刀数**的对应人数。其中，当前持有补偿和已出多于3刀的成员昵称会展开显示。
	- `查补刀`或`查补时刀`，返回全会当前**持有补偿**的成员及其持有的**补偿数量**。
	- `查2刀`，忽略补偿，返回当前**已出完整刀和收尾刀共计2刀，还有1刀完整刀待出**的所有成员。
	- `查7刀`，忽略补偿，返回当前**已出完整刀和收尾刀共计7刀**的所有成员（一人多号等特殊情况）。
- 当天被代（报）过刀的成员，若不在公会成员用户组中，则昵称会显示为当日第一个为其代（报）刀的用户的昵称附注代刀。<br>例：假设优衣和佑树都不在公会成员用户组中，当天佑树为优衣代了第一刀，在用户组中的真琴为优衣代了第二刀，查刀时，优衣会显示成`佑树（代刀）`。
- 涉及10刀及以上的指令会被忽略，请通过`查刀`指令获取相关成员列表。

## 报刀指令

### 报刀
在**BOSS子频道**收到**报刀相关指令**后，机器人会**记录刀伤**并更新`全体BOSS状态`。<br>
所有指令**默认隐藏BOSS编号**；`<刀伤>`可以带单位，支持`千万/kw`、`万/w`、`千/k`，但不能超过`BOSS当前血量`。
- **完整刀**：
	- 指令格式：`刀<刀伤>`
	- **可接受**指令举例，均以`2王 刀伤5,500,000`为例：
		- `刀550w`
		- `刀0.55千万`
		- `2报刀5500000`
		- `报刀5500k`
	- **会被误读**的部分指令举例，均以`2王 刀伤5,500,000`为原目标：
		- `刀2550w`，会被理解为`2王 刀伤25,500,000`
		- `刀2 550w`，会被理解为`2王 刀伤2`
		- （在`三王`频道中）`2报刀550w`，会被理解为`3王 刀伤5,500,000`
		- `刀5,500,000`，会被理解为`2王 刀伤5`
- **收尾刀**：
	- 指令格式：`尾`
	- **可接受**指令举例，均以`2王尾刀 刀伤5,500,000`为例：
		- `尾`
		- `2尾刀`
		- `2收尾`
		- `尾2`
		- （在`二王`频道中）`来个hero收了这个尾吧`
	- **会被误读**的部分指令举例，均以`2王尾刀 刀伤5,500,000`为原目标：
		- `刀550w`，因为`刀伤`≥`当前血量`，会被要求重报尾刀
		- （在`三王`频道中）`尾2`，会被理解为`3王尾刀 刀伤为三王当前血量`
- **补时刀**：
	- 指令格式：`补<刀伤>`或`b<刀伤>`或`<非数字字符或非“尾”汉字><刀伤>b`
	- **可接受**指令举例，均以`2王补时 刀伤5,500,000`为例：
		- `补550万`
		- `刀550wb`
		- `b0.55千万`
		- `2补时报刀5500000`
		- `补时5500k`
		- （在`二王`频道中）`这个b2怎么就剩550w血了`
	- **会被误读**的部分指令举例，均以`2王 刀伤5,500,000`为原目标：
		- `550wb`，会被理解为`2王补时 刀伤500,000`
		- `刀2550wb`，会被理解为`2王补时 刀伤25,500,000`
		- `补2 550w`，会被理解为`2王补时 刀伤2`
		- （在`三王`频道中）`2补550w`，会被理解为`3王补时 刀伤5,500,000`
		- `补5,500,000`，会被理解为`2王补时 刀伤5`
- **补时尾刀**：
	- 指令格式：`尾补`或`补尾`或`尾b`或`b尾`
	- **可接受**指令举例，均以`2王补时尾刀 刀伤5,500,000`为例：
		- `尾b`
		- `2补时尾刀`
		- `2补时收尾`
		- `尾2b`
		- （在`二王`频道中）`来个hero收了b2这个尾吧`
	- **会被误读**的部分指令举例，均以`2王补时尾刀 刀伤5,500,000`为原目标：
		- `刀550wb`，因为`刀伤`≥`当前血量`，会被要求重报尾刀
		- （在`三王`频道中）`尾2b`，会被理解为`3王补时尾刀 刀伤为三王当前血量`

### 撤销

!> 当`撤销`涉及跨周目时，建议优先使用`修改`指令，或寻求管理员的帮助。

在**全部子频道**收到**撤销指令**后，机器人会**删除该刀记录**并复原`全体BOSS状态`。<br>
所有成员撤销任意1刀都需要**带编号**，与其所在用户组和待撤销记录是否为自己的出刀均无关。<br>
管理员可以撤销任意成员的出刀，其余成员只能撤销自己的出刀和自己被代刀的记录。
- 指令格式：`撤销<编号>`
- 返回信息：
	- 若撤销成功，机器人会给出成功反馈并将`全部BOSS当前状态`推送至`当前子频道`和`状态子频道`中。
	- 若撤销失败，机器人会给出失败原因。消息中如提到“联系管理员”，说明撤销过程中对`出刀记录`和`BOSS状态`的更改出现严重错误，请立即联系管理员。

### 修改
在**全部子频道**收到**修改指令**后，机器人可以**修改该刀刀型**。<br>
所有成员修改任意1刀都需要**带编号和目标类型**，与其所在用户组和待修改记录是否为自己的出刀均无关。<br>
管理员可以修改任意成员的出刀刀型，其余成员只能修改自己的出刀和自己被代刀的记录。
- 指令格式：`修改<编号><尾|补|整>`
- **可接受**指令举例：
	- `修改125收尾`
	- `修改 125 尾刀`
	- `修改+125+当然是尾啦，怎么刚才报错了呢哈哈哈哈哈`
- 返回信息：
	- 若撤销成功，机器人会给出成功反馈。
	- 若撤销失败，机器人会给出失败原因。